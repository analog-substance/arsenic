#! /bin/bash

if [ ! -f blacklist-domains.txt ] || [ ! -s blacklist-domains.txt ]; then
    cat -
    exit
fi

IN_SCOPE_REGEX=$(echo $(cat scope-domains.txt | sed 's/\./\\./g') | sed 's/ /|/g')
BLACKLIST_REGEX=$(echo $(cat blacklist-domains.txt | sed 's/\./\\./g') | sed 's/ /|/g')

grep -P $IN_SCOPE_REGEX \
| grep -vP $BLACKLIST_REGEX

